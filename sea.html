<html>
  <head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>

  <body>
    <a-scene vr-mode-ui="enabled: true">
      <!--VR environment -->
      <a-entity laser-controls="hand: right" raycaster="showLine: true; far: 1000"></a-entity>
      <a-entity camera look-controls></a-entity>
      <a-camera position="0 1.6 0"></a-camera>
      
      <!--sea-->
      <a-sky color="#46A3FF"></a-sky>
      <a-plane position="0 0 0" rotation="-90 0 0" width="5" height="5" color="#003D79"></a-plane>
      <!--bubble-->
      <a-entity id="bubble-container" position="0 1.5 0"></a-entity>

      <!--lift-->
      <a-cone position="0 3 -4" rotation="0 45 0" radius-bottom="2" radius-top="0" height="1.5" color="#E0E0E0" segments-radial="4"></a-cone>
      <a-box position="0 1 -4" depth="2" width="2" height="3" color="#FF2D2D" onclick="goToBackPage()"></a-box>
      <a-text value="Go Back" position="0 1.5 -2.9" color="#FFFFFF" align="center"></a-text>
      <a-text value="(click here)" position="0 1.2 -2.9" color="#FFFFFF" align="center"></a-text>

      <!--flowers-->
      <a-torus-knot position="0 0.25 0" color="#FFFF37" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#FFFF37" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#4EFEB3" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#4EFEB3" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#B15BFF" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#B15BFF" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#FF60AF" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#FF60AF" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#4DFFFF" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#4DFFFF" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#FF0000" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>
      <a-torus-knot position="0 0.25 0" color="#FF0000" rotation="90 0 0" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" scale="0.03 0.03 0.03" random-move></a-torus-knot>

      <!--monsters-->
      <a-octahedron position="-1 2.3 2" color="#FFFF37" radius="5" scale="0.05 0.05 0.05" class="clickable" click-handler></a-octahedron>
      <a-octahedron position="1 2.3 2" color="#4EFEB3" radius="5" scale="0.05 0.05 0.05" class="clickable" click-handler></a-octahedron>
      <a-octahedron position="2 2.3 -1.5" color="#B15BFF" radius="5" scale="0.05 0.05 0.05" class="clickable" click-handler></a-octahedron>
      <a-octahedron position="2 2.3 0.5" color="#FF60AF" radius="5" scale="0.05 0.05 0.05" class="clickable" click-handler></a-octahedron>
      <a-octahedron position="-2 2.3 -1.5" color="#4DFFFF" radius="5" scale="0.05 0.05 0.05" class="clickable" click-handler></a-octahedron>
      <a-octahedron position="-2 2.3 0.5" color="#FF0000" radius="5" scale="0.05 0.05 0.05" class="clickable" click-handler></a-octahedron>

      <!-- Click event handler -->
      <!-- Click event handler -->
      <script>
        AFRAME.registerComponent('click-handler', {
          init: function () {
            var el = this.el;
            el.addEventListener('click', function () {
              // Make the clicked object transparent
              el.setAttribute('material', 'opacity', 0);
            });
          }
        });
      </script>

        <!--change scene-->
        <script>
          function goToBackPage() {
            window.location.href = 'back.html';
          }
        </script>

<script>
  AFRAME.registerComponent('random-move', {
    init: function () {
      var el = this.el;
      var position = el.getAttribute('position');
      var speed = 0.01; // adjust the speed of movement
      var initialX = position.x;
      var initialZ = position.z;
      var range = 2;

      function updatePosition() {
        var x = initialX + (Math.random() * range * 2 - range);
        var z = initialZ + (Math.random() * range * 2 - range);
        el.setAttribute('position', { x: x, y: position.y, z: z });
      }

      setInterval(updatePosition, 1000); // adjust the interval as needed
    }
  });
</script>

  </body>
</html>

<script>
  // bubble container
  var bubbleContainer = document.getElementById('bubble-container');
  var bubbleCount = 300; // amount
  var bubbleRange = 10; // range
  var bubbleSpeed = 0.01; // speed
  // generation
  function generateBubble() {
    var bubbleSize = Math.random() * 0.05; // size
    var bubblePositionX = (Math.random() - 0.5) * bubbleRange; // x axis
    var bubblePositionZ = (Math.random() - 0.5) * bubbleRange; // z axis
    var bubble = document.createElement('a-sphere');
    bubble.setAttribute('radius', bubbleSize);
    bubble.setAttribute('color', '#FFFFFF');
    bubble.setAttribute('position', bubblePositionX + ' ' + -2 + ' ' + bubblePositionZ); // start position
    bubbleContainer.appendChild(bubble);
    // move upward
    bubble.setAttribute('animation', {
      property: 'position',
      to: {x: bubblePositionX, y: 2, z: bubblePositionZ},
      dur: Math.random() * 2000 + 2000, // time
      easing: 'linear',
      loop: true // won't stop
    });
  }
  // initialise
  for (var i = 0; i < bubbleCount; i++) {
    generateBubble();
  }
</script>
  // initialise
  for (var i = 0; i < bubbleCount; i++) {
    generateBubble();
  }
</script>
